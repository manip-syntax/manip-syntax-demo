var B=Object.defineProperty;var S=(n,e,t)=>e in n?B(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>(S(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function v(n,e){let t=n.length;if(t!=e.length)return!1;for(;t--;)if(n[t]!==e[t])return!1;return!0}function i(n){if(n===null)throw TypeError("elt is null");return n}function N(n,e,t={}){let s=document.createElement(e);return n.appendChild(s),Object.entries(t).forEach(([r,o])=>s.setAttribute(r,o)),s}function E(n,e){n.classList.add("modal-contenu-animation-disparition");const t=()=>{e.style.display="none",n.classList.remove("modal-contenu-animation-disparition"),n.removeEventListener("animationend",t)};n.addEventListener("animationend",t)}const p=class{constructor(e){l(this,"verbes",[]);l(this,"_phrase_cassee",[]);l(this,"_fonctions",{});this.phrase=e,this.phrase=e,this._cassePhrase()}get contenu(){return this.phrase}set contenu(e){this.phrase=e}get phraseCassee(){return this._phrase_cassee}get longueur(){return this._phrase_cassee.length}static get separateur(){return this._separateur}fonction(e){let t=[];if(e>=this.longueur)return t;this.verbes.includes(e)&&t.push("verbes");for(const s in this._fonctions)this._fonctions[s].includes(e)&&t.push(s);return t}fonction_detaillee(e){return this.fonction(e).map(t=>{const s=this.fonctionPos(t);return[t,s[0],s.slice(-1)[0]]}).sort((t,s)=>t[2]-t[1]>s[2]-s[1]?-1:1)}fonctionPos(e){return e=="verbes"?this.verbes:this._fonctions[e]}fonctionMots(e){return this._fonctions[e].map(t=>this._phrase_cassee[t]).join(" ")}declareFonction(e,t){e==="verbes"?this.verbes=t:this._fonctions[e]=t.sort((s,r)=>s-r)}_cassePhrase(){this._phrase_cassee=this.phrase.split(p._separateur).filter(e=>e)}};let u=p;l(u,"Separateur","[ ,;?!.'-]"),l(u,"_separateur",new RegExp(p.Separateur));class d extends u{constructor(e){super(e)}toJSON(){return Object.assign(this)}static reviver(e,t){return e===""?d.fromJSON(t):t}static fromJSON(e){if(typeof e=="string")return JSON.parse(e,d.reviver);{let t=Object.create(d.prototype);return Object.assign(t,e)}}aFonction(e){const t=this.fonctionPos(e);return typeof t>"u"?!1:!v(t,[])}estFonction(e,t){return typeof this.fonctionPos(e)>"u"?!1:v(this.fonctionPos(e),t.sort())}}class m extends u{constructor(e,t){super(e),this._corrige=t,this._corrige=t}get corrige(){return this._corrige}declare(e,t){return this.declareFonction(e,t),this._corrige.estFonction(e,t)}}function L(n,e){return["sujet","groupe_verbal"].includes(n)?e?"[":"]":""}function C(n,e){return e==n[1]||n[0]==="verbes"?`${L(n[0],!0)}<span class="phrase-${n[0]}">`:""}function x(n,e){return e==n[2]||n[0]==="verbes"?`</span>${L(n[0],!1)}`:""}function M(n){const e=new RegExp("("+m.Separateur+")"),t=n.contenu.split(e);let s=0,r=[];for(const o of t){if(m.Separateur.includes(o)){r.push(o);continue}const c=n.fonction_detaillee(s);c.forEach(a=>r.push(C(a,s))),r.push(`<span class="phrase-cliquable" id="phrase-mot-${s}">${o}</span>`),c.forEach(a=>r.push(x(a,s))),s+=1}return r.join("")}const P=[{phrase:"Le chat mange la souris.",verbes:[2],_fonctions:{verbe_principal:[2],sujet:[0,1],cod:[3,4],groupe_verbal:[2,3,4]}},{phrase:"Marie donne du lait au chat.",verbes:[1],_fonctions:{verbe_principal:[1],sujet:[0],cod:[2,3],coi:[4,5],groupe_verbal:[1,2,3,4,5]}},{phrase:"Un véritable amant ne connaît point d'amis.",verbes:[4],_fonctions:{verbe_principal:[4],sujet:[0,1,2],coi:[6,7],groupe_verbal:[3,4,5,6,7]}},{phrase:"L'amour rend tout permis.",verbes:[2],_fonctions:{verbe_principal:[2],sujet:[0,1],cod:[3],attribut_du_cod:[4],groupe_verbal:[2,3,4]}},{phrase:"Vous êtes son rival ?",verbes:[1],_fonctions:{verbe_principal:[1],sujet:[0],attribut_du_sujet:[2,3],groupe_verbal:[1,2,3]}},{phrase:"Il est adoré d'elle.",verbes:[1,2],_fonctions:{verbe_principal:[1,2],sujet:[0],complément_d_agent:[3,4],groupe_verbal:[1,2,3,4]}}],q=P.map(n=>d.fromJSON(n));function w(n,e=0){return q.slice(e,e+n)}const y=[["verbes","Clique sur les verbes."],["verbe_principal","Clique sur le verbe principal"],["groupe_verbal","Surligne le groupe verbal"],["sujet","Surligne le groupe sujet"],["cod","Surligne le Complément d'objet direct (COD)."],["coi","Surligne le Complément d'objet indirect (COI)."],["attribut_du_sujet","Surligne l'attribut du sujet."],["attribut_du_cod","Surligne l'attribut du COD."]];function F(n){let e=new m(n.contenu,n);f(0,e)}function f(n,e){const[t,s]=y[n];function r(){n===y.length-1?T():f(n+1,e)}e.corrige.aFonction(t)||r(),i(document.getElementById("consigne-container")).innerHTML=`${s}`,i(document.getElementById("phrase-analyse-paragraphe")).innerHTML=M(e),g=()=>{const o=Array.from(document.getElementsByClassName("phrase-selectionne")).map(a=>Number(a.id.split("-")[2]));if(o.length===0?!e.corrige.aFonction(t):e.declare(t,o))r();else{const a=i(document.getElementById("modal-message-contenu"));a.classList.add("modal-message-erreur"),j("Il y a une erreur dans ton analyse !","Reprendre l'analyse",()=>{f(n,e),a.classList.remove("modal-message-erreur"),Array.from(document.getElementsByClassName("phrase-cliquable")).forEach(b=>{o.includes(Number(b.id.split("-")[2]))&&b.classList.add("phrase-selectionne")})})}}}function j(n,e,t){const s=i(document.getElementById("modal-message")),r=i(document.getElementById("modal-message-contenu-texte")),o=i(document.getElementById("modal-message-bouton"));r.innerHTML=n,o.innerHTML=e,s.style.display="block",I=()=>{E(i(document.getElementById("modal-message-contenu")),s),t()}}function T(){j("Bravo !","Commencer une autre analyse",O)}function O(){const n=i(document.getElementById("modal-choix-phrase"));n.style.display="block";const e=w(5,0),t=i(document.getElementById("modal-choix-phrase-liste"));t.innerHTML="";for(let s in e){const r=e[s],o=N(t,"li",{id:`modal-choix-phrase-liste-${s}`});o.innerHTML=r.contenu,o.addEventListener("click",()=>{F(e[s]),E(i(document.getElementById("modal-choix-phrase-contenu")),n)})}}let h=!1;const _=i(document.getElementById("phrase-analyse-paragraphe"));_.addEventListener("mousedown",n=>{const e=n.target;n.button!=0||!e.classList.contains("phrase-cliquable")||(console.log(n),h=!0,e.classList.toggle("phrase-selectionne"))});_.addEventListener("mouseover",n=>{const e=n.target;h&&e.classList.contains("phrase-cliquable")&&e.classList.toggle("phrase-selectionne")});_.addEventListener("mouseup",n=>{h=!1});let g=()=>console.log("Problème: la validation n'a pas été mise en place");i(document.getElementById("bouton-valider")).addEventListener("click",()=>{g()});document.onkeyup=function(n){n.which===13&&g()};let I=()=>console.log("Problème: aucune fonction définie pour le bouton du message");i(document.getElementById("modal-message-bouton")).addEventListener("click",()=>{I()});O();
