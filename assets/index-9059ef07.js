var L=Object.defineProperty;var O=(n,e,t)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>(O(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function h(n,e){let t=n.length;if(t!=e.length)return!1;for(;t--;)if(n[t]!==e[t])return!1;return!0}function i(n){if(n===null)throw TypeError("elt is null");return n}function j(n,e,t={}){let o=document.createElement(e);return n.appendChild(o),Object.entries(t).forEach(([s,r])=>o.setAttribute(s,r)),o}function g(n,e){n.classList.add("modal-contenu-animation-disparition");const t=()=>{e.style.display="none",n.classList.remove("modal-contenu-animation-disparition"),n.removeEventListener("animationend",t)};n.addEventListener("animationend",t)}const p=class{constructor(e){l(this,"verbes",[]);l(this,"_phrase_cassee",[]);l(this,"_fonctions",{});this.phrase=e,this.phrase=e,this._cassePhrase()}get contenu(){return this.phrase}set contenu(e){this.phrase=e}get phraseCassee(){return this._phrase_cassee}get longueur(){return this._phrase_cassee.length}static get separateur(){return this._separateur}fonction(e){let t=[];if(e>=this.longueur)return t;this.verbes.includes(e)&&t.push("verbes");for(const o in this._fonctions)this._fonctions[o].includes(e)&&t.push(o);return t}fonction_detaillee(e){return this.fonction(e).map(t=>{const o=this.fonctionPos(t);return[t,o[0],o.slice(-1)[0]]}).sort((t,o)=>t[2]-t[1]>o[2]-o[1]?-1:1)}fonctionPos(e){return e=="verbes"?this.verbes:this._fonctions[e]}fonctionMots(e){return this._fonctions[e].map(t=>this._phrase_cassee[t]).join(" ")}declareFonction(e,t){e==="verbes"?this.verbes=t:this._fonctions[e]=t.sort((o,s)=>o-s)}_cassePhrase(){this._phrase_cassee=this.phrase.split(p._separateur).filter(e=>e)}};let u=p;l(u,"Separateur","[ ,;?!.'-]"),l(u,"_separateur",new RegExp(p.Separateur));class d extends u{constructor(e){super(e)}toJSON(){return Object.assign(this)}static reviver(e,t){return e===""?d.fromJSON(t):t}static fromJSON(e){if(typeof e=="string")return JSON.parse(e,d.reviver);{let t=Object.create(d.prototype);return Object.assign(t,e)}}aFonction(e){const t=this.fonctionPos(e);return typeof t>"u"?!1:!h(t,[])}estFonction(e,t){return typeof this.fonctionPos(e)>"u"?!1:h(this.fonctionPos(e),t.sort())}}class m extends u{constructor(e,t){super(e),this._corrige=t,this._corrige=t}get corrige(){return this._corrige}declare(e,t){return this.declareFonction(e,t),this._corrige.estFonction(e,t)}}function B(n,e){return e==n[1]||n[0]==="verbes"?`<span class="phrase-${n[0]}">`:""}function I(n,e){return e==n[2]||n[0]==="verbes"?"</span>":""}function S(n){const e=new RegExp("("+m.Separateur+")"),t=n.contenu.split(e);let o=0,s=[];for(const r of t){if(m.Separateur.includes(r)){s.push(r);continue}const a=n.fonction_detaillee(o);a.forEach(c=>s.push(B(c,o))),s.push(`<span class="phrase-cliquable" id="phrase-mot-${o}">${r}</span>`),a.forEach(c=>s.push(I(c,o))),o+=1}return s.join("")}const N=[{phrase:"Le chat mange la souris.",verbes:[2],_fonctions:{verbe_principal:[2],sujet:[0,1],cod:[3,4]}},{phrase:"Marie donne du lait au chat.",verbes:[1],_fonctions:{verbe_principal:[1],sujet:[0],cod:[2,3],coi:[4,5]}},{phrase:"Un véritable amant ne connaît point d'amis.",verbes:[4],_fonctions:{verbe_principal:[4],sujet:[0,1,2],coi:[6,7]}},{phrase:"L'amour rend tout permis.",verbes:[2],_fonctions:{verbe_principal:[2],sujet:[0,1],cod:[3],attribut_du_cod:[4]}},{phrase:"Vous êtes son rival ?",verbes:[1],_fonctions:{verbe_principal:[1],sujet:[0],attribut_du_sujet:[2,3]}},{phrase:"Il est adoré d'elle.",verbes:[1,2],_fonctions:{verbe_principal:[1,2],sujet:[0],complément_d_agent:[3,4]}}],C=N.map(n=>d.fromJSON(n));function x(n,e=0){return C.slice(e,e+n)}const _=[["verbes","Clique sur les verbes."],["verbe_principal","Clique sur le verbe principal"],["sujet","Surligne le sujet"],["cod","Surligne le Complément d'objet direct (COD)."],["coi","Surligne le Complément d'objet indirect (COI)."],["attribut_du_sujet","Surligne l'attribut du sujet."],["attribut_du_cod","Surligne l'attribut du COD."]];function M(n){let e=new m(n.contenu,n);f(0,e)}function f(n,e){const[t,o]=_[n];i(document.getElementById("consigne-container")).innerHTML=`${o}`,i(document.getElementById("phrase-analyse-paragraphe")).innerHTML=S(e);for(const s of document.getElementsByClassName("phrase-cliquable"))s.addEventListener("click",()=>{s.classList.toggle("phrase-selectionne")});v=()=>{const s=Array.from(document.getElementsByClassName("phrase-selectionne")).map(a=>Number(a.id.split("-")[2]));if(s.length===0?!e.corrige.aFonction(t):e.declare(t,s))n===_.length-1?P():f(n+1,e);else{const a=i(document.getElementById("modal-message-contenu"));a.classList.add("modal-message-erreur"),b("Il y a une erreur dans ton analyse !","Reprendre l'analyse",()=>{f(n,e),a.classList.remove("modal-message-erreur"),Array.from(document.getElementsByClassName("phrase-cliquable")).forEach(c=>{s.includes(Number(c.id.split("-")[2]))&&c.classList.add("phrase-selectionne")})})}}}function b(n,e,t){const o=i(document.getElementById("modal-message")),s=i(document.getElementById("modal-message-contenu-texte")),r=i(document.getElementById("modal-message-bouton"));s.innerHTML=n,r.innerHTML=e,o.style.display="block",E=()=>{g(i(document.getElementById("modal-message-contenu")),o),t()}}function P(){b("Bravo !","Commencer une autre analyse",y)}function y(){const n=i(document.getElementById("modal-choix-phrase"));n.style.display="block";const e=x(5,0),t=i(document.getElementById("modal-choix-phrase-liste"));t.innerHTML="";for(let o in e){const s=e[o],r=j(t,"li",{id:`modal-choix-phrase-liste-${o}`});r.innerHTML=s.contenu,r.addEventListener("click",()=>{M(e[o]),g(i(document.getElementById("modal-choix-phrase-contenu")),n)})}}let v=()=>console.log("Problème: la validation n'a pas été mise en place");i(document.getElementById("bouton-valider")).addEventListener("click",()=>{v()});let E=()=>console.log("Problème: aucune fonction définie pour le bouton du message");i(document.getElementById("modal-message-bouton")).addEventListener("click",()=>{E()});y();
